<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Gracias</title>
    <link rel="stylesheet" href="css/lastpage.css" />
  </head>
  <body>
    <div id="thankyou"><b>Gracias</b></div>

    <img id="rizz" src="rizz.gif" alt="rizz" class="responsive" />
    <br />

    <audio controls autoplay loop>
      <source src="congratulations.mp3" type="audio/mpeg" />
      Tu navegador no soporta el audio.
    </audio>

    <h1>Â¡No te vayas todavÃ­a!</h1>

    <!-- Resumen -->
    <div id="resumen" style="margin-top: 18px;"></div>

    <!-- BotÃ³n para enviarte el resultado -->
    <button class="button" id="btnEnviar" style="margin-top: 12px;">
      Enviar el resumen ðŸ’Œ
    </button>

    <!-- BotÃ³n para volver a elegir -->
    <button class="button" onclick="location.href='date.html'" style="margin-top: 12px;">
      Cambiar opciones UWU
    </button>

    <script>
      // Leer datos guardados
      const fecha = localStorage.getItem("fechaValentine") || "";
      const comida = JSON.parse(localStorage.getItem("comidaValentine") || "[]");
      const postre = JSON.parse(localStorage.getItem("postreValentine") || "[]");

      // Validaciones bÃ¡sicas
      if (!fecha) {
        alert("Falta seleccionar la fecha ðŸ˜…");
        window.location.href = "date.html";
      }

      // Formatear texto
      const fechaTexto = fecha || "No seleccionada";
      const comidaTexto = comida.length > 0 ? comida.join(", ") : "No seleccionada";
      const postreTexto = postre.length > 0 ? postre.join(", ") : "No seleccionado";

      // Mostrar resumen
      document.getElementById("resumen").innerHTML = `
        <p><b>Fecha:</b> ${fechaTexto}</p>
        <p><b>Comida:</b> ${comidaTexto}</p>
        <p><b>Postre:</b> ${postreTexto}</p>
      `;

      // Enviar correo
      document.getElementById("btnEnviar").addEventListener("click", () => {
        const subject = "ElecciÃ³n Valentine ðŸ’˜";
        const body =
          "Resumen de lo que elegÃ­:\n\n" +
          "Fecha: " + fechaTexto + "\n" +
          "Comida: " + comidaTexto + "\n" +
          "Postre: " + postreTexto + "\n\n" +
          "Te amo ðŸ’–";

        // Tu correo (ya configurado)
        const to = "advalverde01@gmail.com";

        window.location.href =
          `mailto:${to}?subject=${encodeURIComponent(subject)}&body=${encodeURIComponent(body)}`;
      });
    </script>
  </body>
</html>
